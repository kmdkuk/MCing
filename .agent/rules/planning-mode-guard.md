---
trigger: always_on
description: Planningモード時のコード実装抑止ルール
---

# Planning Mode Guard

## 0. 🚨 言語プロトコル（最優先・絶対遵守）

**全ての出力において、必ずユーザーが直近で使用した言語と同じ言語を使用すること。**

- **対象範囲**:
  - 会話レスポンス
  - implementation_plan.md
  - task.md
  - walkthrough.md
- **禁止事項**:
  - 例）ユーザーが日本語を使用しているのに、英語で計画書やタスクリストを作成すること。
  - ※コード内の変数名や予約語は除く。

## 1. モード確認と振る舞いの定義

各レスポンスの生成前に、現在のモード（`task_boundary` の Mode、またはユーザーの指定）を確認し、以下の定義に従って振る舞うこと。

### 🛡️ Planning Mode (PLANNING)
**目的**: 実装計画の策定、要件定義、ユーザーとの合意形成
- **✅ やるべきこと**:
  - ユーザーの要望に沿った実装計画（`implementation_plan.md`）の作成・提示
  - 既存コードの調査・把握
- **🚫 禁止事項 (Strictly Prohibited)**:
  - **プロダクトコードの実装・編集**（`replace_file_content` 等の使用禁止）
  - ユーザーの明示的な承認（「実装して」等の指示）を得る前の実装着手
  - ※計画ファイル自体の更新は許可される

### 🚀 Execution Mode (Fast / Agent / EXECUTION)
**目的**: タスクの実行、コーディング
- **✅ やるべきこと**:
- 承認された計画に基づき、ユーザーに指示されたタスクを迅速に実行する
